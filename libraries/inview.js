"use strict";!function(){function e(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].toLowerCase();this[i]=new Number(t),this[i].string=i}}var a={index:0,check:function(e){e[$.expando]||(e[$.expando]=++a.index)},make:function(e,t){return a.check(e),t.guid+"-"+e[$.expando]}},c={TYPE:new e(["onscreen","inview"]),INVIEW_STATES:new e(["none","top","bottom","left","right","both"]),registered:[],shouldReProcess:!0,register:function(e,t,n){var i=r.isLocked(),o=$(e);c.registered.push({id:a.make(e,t),data:t,$element:o,type:n,_onscreen:i?null:I.get(o).uniqueMeasurementId,_hasTriggered:!1}),c.shouldReProcess=!0},unregister:function(e,t,n){for(var i=c.registered,o=a.make(e,t),r=i.length-1;-1<r;r--){var s=i[r];s.id===o&&s.type===n&&(i.splice(r,1),c.shouldReProcess=!0)}},process:function(){var e,t=c.registered;for(c.shouldReProcess=!0;c.shouldReProcess;){if(c.shouldReProcess=!1,0===(e=t.length))return;for(var n=0;n<e;n++){var i=t[n],o=I.get(i.$element),r=void 0!==i._onscreen;if(r&&i._hasTriggered)if(!(i._onscreen!==o.uniqueMeasurementId))continue;switch(i._onscreen=o.uniqueMeasurementId,i._hasTriggered=!0,i.type){case c.TYPE.onscreen:c.processOnScreen(i,o);break;case c.TYPE.inview:c.processInView(i,o)}if(c.shouldReProcess)break}}},processOnScreen:function(e,t){e.$element.trigger("onscreen",t)},processInView:function(e,t){var n=0<=t.percentFromTop&&t.percentFromTop<=100,i=0<=t.percentFromBottom&&t.percentFromBottom<=100,o=0<=t.percentFromLeft&&t.percentFromLeft<=100,r=0<=t.percentFromRight&&t.percentFromRight<=100,i=(n&&i?c.INVIEW_STATES.both:n?c.INVIEW_STATES.top:i?c.INVIEW_STATES.bottom:c.INVIEW_STATES.none).string,r=(o&&r?c.INVIEW_STATES.both:o?c.INVIEW_STATES.left:r?c.INVIEW_STATES.right:c.INVIEW_STATES.none).string,i=[t.onscreen,r,i];e._inviewPreviousState=i,e._measurePreviousState=t,e.$element.trigger("inview",i)}},i={lastStartEvent:0,timeoutHandle:null,intervalDuration:100,hasRaf:!1,start:function(){i.lastStartEvent=(new Date).getTime(),i.repeat()},repeat:function(){i.stop(),i.hasRaf?i.timeoutHandle=requestAnimationFrame(i.main):i.timeoutHandle=setTimeout(i.main,i.intervalDuration)},hasExpired:function(){if(!((new Date).getTime()-i.lastStartEvent<1500))return i.stop(),!0},isThrottled:function(){return!((new Date).getTime()-i.lastMain>i.intervalDuration)},lastMain:(new Date).getTime(),main:function(){i.isThrottled()?i.repeat():(i.lastMain=(new Date).getTime(),i.hasExpired()||(0===c.registered.length?(i.stop(),i.intervalDuration=200):(i.stop(),i.intervalDuration=100),i.repeat(),r.isLocked()||c.process()))},stop:function(){null!==i.timeoutHandle&&((i.hasRaf?cancelAnimationFrame:clearTimeout)(i.timeoutHandle),i.timeoutHandle=null)}};$.extend($.event.special,{onscreen:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.onscreen)},remove:function(e){c.unregister(this,e,c.TYPE.onscreen)}},inview:{noBubble:!0,add:function(e){c.register(this,e,c.TYPE.inview)},remove:function(e){c.unregister(this,e,c.TYPE.inview)}}}),$.extend($.fn,{onscreen:function(e){return e?(this.on("onscreen",e),this):I.get(this)},inview:function(e){return e?(this.on("inview",e),this):I.get(this)}});var r={locks:[],lock:function(e){r.isLocked(e)||r.locks.push(e)},unlock:function(e){if(r.isLocked(e)){for(var t=0,n=r.locks.length;t<n;t++)if(r.locks[t]===e){r.locks.splice(t,1);break}i.start()}},isLocked:function(e){if(!e)return 0<r.locks.length;for(var t=0,n=r.locks.length;t<n;t++)if(r.locks[t]===e)return!0;return!1}},t={options:{},config:function(e){"object"==typeof e&&$.extend(t.options,e)}};$.inview=$.onscreen=function(){i.start()},$.extend($.inview,r,t);var E={$el:$(window),height:null,width:null,heightRatio:null,widthRatio:null,resize:function(){E.height=window.innerHeight||E.$el.height(),E.width=window.innerWidth||E.$el.width(),E.heightRatio=100/E.height,E.widthRatio=100/E.width,i.start()}},I={featureDetect:function(){i.hasRaf=window.requestAnimationFrame&&window.cancelAnimationFrame},get:function(e){if(0!==e.length){var t=e[0];try{g=t.getBoundingClientRect()}catch(e){g={top:0,right:0,bottom:0,left:0,width:0,height:0}}var n=g.height,i=g.width,o=g.top,r=g.left,s=E.height-(o+n),a=E.width-(r+i),c=Math.round(E.heightRatio*o),h=Math.round(E.widthRatio*r),u=Math.round(E.heightRatio*s),l=Math.round(E.widthRatio*a),d=null,d=0<r+i&&a<0&&r<0?i:r<0?i+r:r+i>E.width?E.width-r:i,f=null;(f=0<o+n&&s<0&&o<0?n:o<0?n+o:o+n>E.height?E.height-o:n)<0&&(f=0),d<0&&(d=0);var e=Math.round(100/n*f),g=Math.round(100/i*d),d=Math.round(100/(n*i)*(f*d)),m=n<=0&&i<=0?!1:100<l||100<h||100<u||100<c?!1:!0;if(m=I.isElementHidden(t)?!1:m)for(var p=I.getParents(t),w=0,v=p.length-1;w<v;w++){var T=p[w];if(I.isElementHidden(T)){m=!1;break}if(I.isOutOfBounds(t,T)){m=!1;break}}return{top:o,left:r,bottom:s,right:a,percentFromTop:c,percentFromLeft:h,percentFromBottom:u,percentFromRight:l,percentInview:d,percentInviewHorizontal:g,percentInviewVertical:e,onscreen:m,uniqueMeasurementId:""+o+r+s+a+n+i+E.height+E.width+m,timestamp:(new Date).getTime()}}},getParents:function(e){for(var t,n=[];t=e.parentElement;)n.push(t),e=t;return n},isElementHidden:function(e){if("none"===e.style.display||"hidden"===e.style.visibility)return!0;e=window.getComputedStyle(e,null);return"none"===e.display||"hidden"===e.visibility},isOutOfBounds:function(e,t){var n=$(t);if("visible"===n.css("overflow"))return!1;var i=$(e).offset();i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth;n=n.offset();return n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,Math.floor(i.bottom)<=Math.ceil(n.top)||Math.floor(i.right)<=Math.ceil(n.left)||Math.ceil(i.top)>=Math.floor(n.bottom)||Math.ceil(i.left)>=Math.floor(n.right)}};$(window).on({"touchmove scroll mousedown keydown":i.start,resize:E.resize}),$(I.featureDetect),E.resize()}();